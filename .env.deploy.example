# ============================================================
# .env.deploy.example для DEPLOY REPO (docker-compose.deploy.yaml)
# Мінімально необхідні змінні для запуску готової системи з Docker Hub.
# ============================================================

# --- Koha image (краще pin по digest у prod) ---
# Наприклад: pinokew/koha@sha256:...
KOHA_IMAGE=pinokew/koha:25.05

# --- Koha runtime ---
KOHA_INSTANCE=library
KOHA_DOMAIN=example.local
KOHA_TIMEZONE=Europe/Kyiv
KOHA_OPAC_PORT=8080
KOHA_INTRANET_PORT=8081

# --- Database ---
DB_HOST=db
DB_NAME=koha_library
DB_USER=koha_db
DB_PASS=change_me_db_pass
DB_ROOT_PASS=change_me_db_root_pass

# --- RabbitMQ ---
RABBITMQ_USER=koha_mq
RABBITMQ_PASS=change_me_mq_pass

# --- Volumes ---
VOL_DB_PATH=$HOME/Koha/koha-deploy-volumes/mysql_data
VOL_ES_PATH=$HOME/Koha/koha-deploy-volumes/elastic_data
VOL_KOHA_CONF=$HOME/Koha/koha-deploy-volumes/koha_config
VOL_KOHA_DATA=$HOME/Koha/koha-deploy-volumes/koha_data
VOL_KOHA_LOGS=$HOME/Koha/koha-deploy-volumes/koha_logs

# --- Optional overrides ---
KOHA_LANGS=uk-UA
USE_ELASTICSEARCH=true
ELASTICSEARCH_HOST=es:9200
MEMCACHED_SERVERS=memcached:11211

# Optional server names (if need explicit vhost hostnames)
KOHA_OPAC_SERVERNAME=
KOHA_INTRANET_SERVERNAME=

# Optional side images (defaults are set in compose)
# MARIADB_IMAGE=docker.io/mariadb:11
# ES_IMAGE=docker.io/elasticsearch:8.19.6
# RABBITMQ_IMAGE=docker.io/rabbitmq:3-management
# MEMCACHED_IMAGE=docker.io/memcached:1.6
# CLOUDFLARED_IMAGE=cloudflare/cloudflared:2026.2.0

# Optional setup pipeline tuning
# KOHA_SETUP_FAIL_FAST=false
# KOHA_SETUP_REQUIRED_STEPS=00-env-checks.sh
# KOHA_SETUP_SKIP_STEPS=
# KOHA_SETUP_ONLY_STEPS=

# Optional only when using `--profile tunnel`
CLOUDFLARE_TOKEN=
